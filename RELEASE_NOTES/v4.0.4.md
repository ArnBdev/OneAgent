# v4.0.4

Date: 2025-08-18

Highlights
- Epic 3 User Story 3.1 complete: MetricsService integrated.
- BaseAgent now logs memory search metrics for both hybrid and vector-only paths.
- Maintains canonical monitoring via UnifiedMonitoringService; optional persistence behind env flag.

Changes
- Added metrics logging to BaseAgent.searchMemories (latency, result counts, context size).
- New unit test for MetricsService monitoring emission.
- No breaking API changes.

Verification
- Lint + Typecheck: PASS
- A2A runtime smoke: PASS
- MetricsService unit test: PASS

Notes
- Set ONEAGENT_METRICS_TO_MEMORY=true to persist metric summaries into memory (optional).
