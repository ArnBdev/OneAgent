# OneAgent v4.0.7 Professional - Release Notes

Release date: 2025-09-01

## Summary

v4.0.7 focuses on observability and NLACS enhancements: SLO exposition, error budgets, histograms, and baseline entity extraction.

## Highlights

- Implemented SLO target gauges from `slo.config.json`: `oneagent_slo_target_latency_ms`, `oneagent_slo_target_error_rate`.
- Added error budget metrics: `oneagent_slo_error_budget_burn`, `oneagent_slo_error_budget_remaining` and a JSON `errorBudgets` array derived from observed error rates vs configured targets.
- Exposed fixed-bucket operation latency histograms and per-operation latency gauges (avg/p95/p99) via Prometheus and JSON endpoints.
- Implemented optional semantic analysis exposure in `ChatAPI` via `includeSemanticAnalysis` flag; returns intent, entities, sentiment, complexity, and model info.
- Introduced a baseline `EntityExtractionService` (pattern-based) integrated into ChatAPI; interface preserved for future ML upgrades.
- Propagated canonical error taxonomy across handlers, monitoring, and metrics; Prometheus metrics use taxonomy-mapped errorCode labels.
- Tests extended: metrics endpoint tests now cover taxonomy labels, SLO gauges, histograms, error budget gauges, and JSON `errorBudgets`.
- Documentation: Roadmap updated (Immediate Action Queue items 7 & 8 marked done); CHANGELOG updated under v4.0.7.

## Notes & Next Steps

- Prototype anomaly detection (latency Z-score) is next on the Immediate Action Queue.
- Plan to upgrade entity extraction to an ML NER provider behind the same `EntityExtractionService` contract.
- Expand `OPERATION_METRICS.md` with SLO/error budget methodology and examples.

## How to verify

- Prometheus-style metrics endpoint: `GET /api/v1/metrics/prometheus`
- JSON metrics endpoint: `GET /api/v1/metrics/json` (look for `errorBudgets` array)
- Run tests: `npm test -- tests/monitoring/metricsEndpoints.test.ts`

## Notes for maintainers

- Tag pushed: `v4.0.7` (annotated)
- Ensure `slo.config.json` is present in deployment for SLO gauges to appear.
